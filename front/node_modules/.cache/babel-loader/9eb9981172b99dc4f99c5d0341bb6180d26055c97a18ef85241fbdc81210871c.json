{"ast":null,"code":"import TableComponent from \"@/components/TableComponent.vue\";\nimport RemoveModalComponent from \"@/components/RemoveModalComponent.vue\";\nimport SupplierModalComponent from \"@/components/SupplierModalComponent.vue\";\nimport CRUDService from \"@/services/CRUDService\";\nimport MessageService from \"@/services/MessageService\";\nexport default {\n  name: \"SuppliersView\",\n  components: {\n    TableComponent,\n    RemoveModalComponent,\n    SupplierModalComponent\n  },\n  data() {\n    return {\n      fields: [{\n        key: \"name\",\n        sortable: true,\n        filtrable: true,\n        label: \"Название\"\n      }, {\n        key: \"address\",\n        sortable: true,\n        filtrable: true,\n        label: \"Адрес\"\n      }, {\n        key: \"phone\",\n        sortable: true,\n        filtrable: true,\n        label: \"Телефон\"\n      }, {\n        key: \"actions\",\n        label: \"Действия\",\n        stickyColumn: true\n      }]\n    };\n  },\n  props: {\n    user: {\n      type: Object,\n      required: true\n    },\n    crud: {\n      type: CRUDService,\n      required: true\n    },\n    messageService: {\n      type: MessageService,\n      required: true\n    }\n  },\n  methods: {\n    supplierPresenter(data) {\n      return data.name;\n    },\n    addTableItemHandler() {\n      this.$refs[\"CreateItemModal\"].show();\n    },\n    removeTableItemHandler(item) {\n      this.$refs[\"RemoveItemModal\"].show(item);\n    },\n    editTableItemHandler(item) {\n      this.$refs[\"EditItemModal\"].show(item);\n    },\n    removeItem(item, modalEvent) {\n      modalEvent.preventDefault();\n      this.crud.removeSupplier(item.entityId).then(() => {\n        this.$refs[\"RemoveItemModal\"].close();\n        this.messageService.showDelete(this.supplierPresenter(item));\n        this.$refs[\"table\"].update();\n      }).catch(err => {\n        this.messageService.showError(err.message);\n      });\n    },\n    addItem(item, modalEvent) {\n      modalEvent.preventDefault();\n      this.crud.addSupplier(item).then(() => {\n        this.$refs[\"CreateItemModal\"].close();\n        this.messageService.showCreate(this.supplierPresenter(item));\n        this.$refs[\"table\"].update();\n      }).catch(err => {\n        this.messageService.showError(err.message);\n      });\n    },\n    updateItem(item, modalEvent) {\n      modalEvent.preventDefault();\n      this.crud.updateSupplier(item.entityId, item).then(() => {\n        this.$refs[\"EditItemModal\"].close();\n        this.messageService.showUpdate(this.supplierPresenter(item));\n        this.$refs[\"table\"].update();\n      }).catch(err => {\n        this.messageService.showError(err.message);\n      });\n    },\n    dataProvider(ctx) {\n      return this.crud.getSuppliers(ctx).catch(data => {\n        this.messageService.showError(\"Не удалось получить данные\");\n        return data;\n      });\n    }\n  }\n};","map":{"version":3,"names":["TableComponent","RemoveModalComponent","SupplierModalComponent","CRUDService","MessageService","name","components","data","fields","key","sortable","filtrable","label","stickyColumn","props","user","type","Object","required","crud","messageService","methods","supplierPresenter","addTableItemHandler","$refs","show","removeTableItemHandler","item","editTableItemHandler","removeItem","modalEvent","preventDefault","removeSupplier","entityId","then","close","showDelete","update","catch","err","showError","message","addItem","addSupplier","showCreate","updateItem","updateSupplier","showUpdate","dataProvider","ctx","getSuppliers"],"sources":["src/views/SuppliersView.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <TableComponent\r\n      ref=\"table\"\r\n      :fields=\"fields\"\r\n      v-on:itemAdd=\"addTableItemHandler\"\r\n      v-on:itemRemove=\"removeTableItemHandler\"\r\n      v-on:itemEdit=\"editTableItemHandler\"\r\n      :dataProvider=\"dataProvider\"\r\n    ></TableComponent>\r\n    <div>\r\n      <RemoveModalComponent\r\n        ref=\"RemoveItemModal\"\r\n        :contentPresenter=\"value => supplierPresenter(value)\"\r\n        :okHandler=\"removeItem\"\r\n      ></RemoveModalComponent>\r\n\r\n      <SupplierModalComponent\r\n        ref=\"CreateItemModal\"\r\n        title=\"Создание записи о поставщике\"\r\n        :submitHandler=\"addItem\"\r\n      >\r\n      </SupplierModalComponent>\r\n\r\n      <SupplierModalComponent\r\n        ref=\"EditItemModal\"\r\n        title=\"Редактирование записи о поставщике\"\r\n        :submitHandler=\"updateItem\"\r\n      >\r\n      </SupplierModalComponent>\r\n    </div>\r\n  </div>\r\n</template>\r\n  \r\n<script>\r\nimport TableComponent from \"@/components/TableComponent.vue\"\r\nimport RemoveModalComponent from \"@/components/RemoveModalComponent.vue\"\r\nimport SupplierModalComponent from \"@/components/SupplierModalComponent.vue\"\r\nimport CRUDService from \"@/services/CRUDService\"\r\nimport MessageService from \"@/services/MessageService\"\r\n\r\nexport default {\r\n  name: \"SuppliersView\",\r\n  components: {\r\n    TableComponent,\r\n    RemoveModalComponent,\r\n    SupplierModalComponent\r\n  },\r\n  data() {\r\n    return {\r\n      fields: [\r\n        {\r\n          key: \"name\",\r\n          sortable: true,\r\n          filtrable: true,\r\n          label: \"Название\"\r\n        },\r\n        {\r\n          key: \"address\",\r\n          sortable: true,\r\n          filtrable: true,\r\n          label: \"Адрес\",\r\n        },\r\n        {\r\n          key: \"phone\",\r\n          sortable: true,\r\n          filtrable: true,\r\n          label: \"Телефон\",\r\n        },\r\n        {\r\n          key: \"actions\",\r\n          label: \"Действия\",\r\n          stickyColumn: true\r\n        }\r\n      ],\r\n    }\r\n  },\r\n  props: {\r\n    user: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    crud: {\r\n      type: CRUDService,\r\n      required: true\r\n    },\r\n    messageService: {\r\n      type: MessageService,\r\n      required: true\r\n    }\r\n  },\r\n  methods: {\r\n    supplierPresenter(data) {\r\n      return data.name;\r\n    },\r\n\r\n    addTableItemHandler() {\r\n      this.$refs[\"CreateItemModal\"].show();\r\n    },\r\n    removeTableItemHandler(item) {\r\n      this.$refs[\"RemoveItemModal\"].show(item);\r\n    },\r\n    editTableItemHandler(item) {\r\n      this.$refs[\"EditItemModal\"].show(item);\r\n    },\r\n\r\n    removeItem(item, modalEvent) {\r\n      modalEvent.preventDefault();\r\n\r\n      this.crud.removeSupplier(item.entityId)\r\n        .then(() => {\r\n          this.$refs[\"RemoveItemModal\"].close();\r\n          this.messageService.showDelete(this.supplierPresenter(item));\r\n          this.$refs[\"table\"].update();\r\n        })\r\n        .catch(err => {\r\n          this.messageService.showError(err.message);\r\n        });\r\n    },\r\n\r\n    addItem(item, modalEvent) {\r\n      modalEvent.preventDefault();\r\n\r\n      this.crud.addSupplier(item)\r\n        .then(() => {\r\n          this.$refs[\"CreateItemModal\"].close();\r\n          this.messageService.showCreate(this.supplierPresenter(item));\r\n          this.$refs[\"table\"].update();\r\n        })\r\n        .catch(err => {\r\n          this.messageService.showError(err.message);\r\n        });\r\n    },\r\n\r\n    updateItem(item, modalEvent) {\r\n      modalEvent.preventDefault();\r\n\r\n      this.crud.updateSupplier(item.entityId, item)\r\n        .then(() => {\r\n          this.$refs[\"EditItemModal\"].close();\r\n          this.messageService.showUpdate(this.supplierPresenter(item));\r\n          this.$refs[\"table\"].update();\r\n        })\r\n        .catch(err => {\r\n          this.messageService.showError(err.message);\r\n        });\r\n    },\r\n\r\n    dataProvider(ctx) {\r\n      return this.crud.getSuppliers(ctx).catch(data => {\r\n        this.messageService.showError(\"Не удалось получить данные\");\r\n        return data;\r\n      });\r\n    },\r\n  }\r\n}\r\n</script>\r\n  \r\n<style scoped></style>\r\n  "],"mappings":"AAmCA,OAAAA,cAAA;AACA,OAAAC,oBAAA;AACA,OAAAC,sBAAA;AACA,OAAAC,WAAA;AACA,OAAAC,cAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAN,cAAA;IACAC,oBAAA;IACAC;EACA;EACAK,KAAA;IACA;MACAC,MAAA,GACA;QACAC,GAAA;QACAC,QAAA;QACAC,SAAA;QACAC,KAAA;MACA,GACA;QACAH,GAAA;QACAC,QAAA;QACAC,SAAA;QACAC,KAAA;MACA,GACA;QACAH,GAAA;QACAC,QAAA;QACAC,SAAA;QACAC,KAAA;MACA,GACA;QACAH,GAAA;QACAG,KAAA;QACAC,YAAA;MACA;IAEA;EACA;EACAC,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,IAAA;MACAH,IAAA,EAAAb,WAAA;MACAe,QAAA;IACA;IACAE,cAAA;MACAJ,IAAA,EAAAZ,cAAA;MACAc,QAAA;IACA;EACA;EACAG,OAAA;IACAC,kBAAAf,IAAA;MACA,OAAAA,IAAA,CAAAF,IAAA;IACA;IAEAkB,oBAAA;MACA,KAAAC,KAAA,oBAAAC,IAAA;IACA;IACAC,uBAAAC,IAAA;MACA,KAAAH,KAAA,oBAAAC,IAAA,CAAAE,IAAA;IACA;IACAC,qBAAAD,IAAA;MACA,KAAAH,KAAA,kBAAAC,IAAA,CAAAE,IAAA;IACA;IAEAE,WAAAF,IAAA,EAAAG,UAAA;MACAA,UAAA,CAAAC,cAAA;MAEA,KAAAZ,IAAA,CAAAa,cAAA,CAAAL,IAAA,CAAAM,QAAA,EACAC,IAAA;QACA,KAAAV,KAAA,oBAAAW,KAAA;QACA,KAAAf,cAAA,CAAAgB,UAAA,MAAAd,iBAAA,CAAAK,IAAA;QACA,KAAAH,KAAA,UAAAa,MAAA;MACA,GACAC,KAAA,CAAAC,GAAA;QACA,KAAAnB,cAAA,CAAAoB,SAAA,CAAAD,GAAA,CAAAE,OAAA;MACA;IACA;IAEAC,QAAAf,IAAA,EAAAG,UAAA;MACAA,UAAA,CAAAC,cAAA;MAEA,KAAAZ,IAAA,CAAAwB,WAAA,CAAAhB,IAAA,EACAO,IAAA;QACA,KAAAV,KAAA,oBAAAW,KAAA;QACA,KAAAf,cAAA,CAAAwB,UAAA,MAAAtB,iBAAA,CAAAK,IAAA;QACA,KAAAH,KAAA,UAAAa,MAAA;MACA,GACAC,KAAA,CAAAC,GAAA;QACA,KAAAnB,cAAA,CAAAoB,SAAA,CAAAD,GAAA,CAAAE,OAAA;MACA;IACA;IAEAI,WAAAlB,IAAA,EAAAG,UAAA;MACAA,UAAA,CAAAC,cAAA;MAEA,KAAAZ,IAAA,CAAA2B,cAAA,CAAAnB,IAAA,CAAAM,QAAA,EAAAN,IAAA,EACAO,IAAA;QACA,KAAAV,KAAA,kBAAAW,KAAA;QACA,KAAAf,cAAA,CAAA2B,UAAA,MAAAzB,iBAAA,CAAAK,IAAA;QACA,KAAAH,KAAA,UAAAa,MAAA;MACA,GACAC,KAAA,CAAAC,GAAA;QACA,KAAAnB,cAAA,CAAAoB,SAAA,CAAAD,GAAA,CAAAE,OAAA;MACA;IACA;IAEAO,aAAAC,GAAA;MACA,YAAA9B,IAAA,CAAA+B,YAAA,CAAAD,GAAA,EAAAX,KAAA,CAAA/B,IAAA;QACA,KAAAa,cAAA,CAAAoB,SAAA;QACA,OAAAjC,IAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}